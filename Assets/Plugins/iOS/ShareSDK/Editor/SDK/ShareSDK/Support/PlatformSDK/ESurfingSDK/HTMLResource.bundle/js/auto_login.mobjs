var autoLogin={j_login_mobile:document.getElementById("j-login-mobile"),j_login_title:document.getElementById("j-login-title"),j_auto_login:document.getElementById("j-auto-login"),j_auto_header:document.getElementById("j-auto-header"),j_client_back:document.getElementById("j-client-back"),j_login_link:document.getElementById("j-login-link"),j_tab_login_link:document.getElementById("j-tab-login-link"),j_app_name:document.getElementById("j-app-name"),j_loading_text:document.getElementById("j-loading-text"),j_logo_icon:document.getElementById("j-logo-icon"),j_help_autoLogin:document.getElementById("j-help-autoLogin"),j_agreement_checkbox:document.getElementById("j-agreement-checkbox"),j_agreement_autoLogin1:document.getElementById("j-agreement-autoLogin1"),j_agreement_autoLogin2:document.getElementById("j-agreement-autoLogin2"),j_agreement_link:"",cacheDeviceData:{},accessCodeData:{accessCode:"",accessCodeCreateTime:"",accessCodeVaildTime:"",encryptMobile:"",accessOperator:""},loginLinkText:{1:"账号密码登录",2:"短信验证登录",3:"其他登录方式"},loginLinkUrl:{1:_mini_prefix+"login.html",2:_mini_prefix+"sms_login.html",3:_mini_prefix+"sms_login.html"},loginTitleText:"以本机号码登录",page:"免密登录页",errorMsg:{errorClientFn:"服务器连接失败，请稍候再试",errorClientCallData:"客户端连接失败，请稍候再试",errorunnet:"连接失败，请检查您的网络设置",errorwifi:"请切换到移动数据网络，进行免密登录",errormobilenet:"当前网络无法免密登录",isLoginText:"该账号已登录，请登录其他账号",threePopupText:"请使用",errorAutoLogin:"当前网络不支持免密登录",freezeAccount:"账号出现异常，系统自动冻结"},loginText:"",loginLink:"",checkToken:!1,init:function(){initData.baseV&&(popup.setOptions(),toast.setOptions(),appkeyForUrl.linkForAutoLogin(),this.checkToken=timeoutToken.checkTokenTimeout(),this.checkToken&&timeoutToken.settingModifyAccount(),this.j_agreement_link=this.j_agreement_autoLogin1.href,initData.baseV.firstLogin?changeAgreementBox(this.j_agreement_checkbox,!1):changeAgreementBox(this.j_agreement_checkbox,!0),this.eventListener(),this.handelAccessCodeData(),checkAccessCode.setOptions(this.accessCodeData),_uxt.push(["_trackEvent",_uxtsdkid+"+SDK"+_uxt_version,"打开","免密登录页"]),_uxt.push(["_trackEvent",_uxtsdkid+"+SDK"+_uxt_version,"免密登录页",onlineTypeText[initData.baseV.onlinetype]]))},initDOM:function(){var _hidenHeader="true"===initData.baseV.hidetop?"ui-button-back hide2":"ui-button-back";this.j_client_back.className=_hidenHeader,"true"===initData.baseV.isShowQa&&this.j_help_autoLogin.classList.add("inline-block"),initData.baseV.autoBtnText&&initData.baseV.autoBtnText.replace(/\s+/g,"").length>0&&(this.j_auto_login.value=initData.baseV.autoBtnText);isios||(this.j_logo_icon.src="file:///android_asset/ctares/images/topIcon/topIcon-logo.png"),this.isShowMobileNum(),this.j_app_name.innerHTML=initData.baseV.appname||"","true"===(initData.baseV.basicapp||"false")?this.initBasicAppLink():this.initLoginLink(),netType=getJsBrigeSdkFunc("getNetState")},isShowMobileNum:function(){checkEntryMobileTitle(initData.baseV)?(this.j_login_mobile.innerHTML=initData.baseV.encryptMobile,this.j_login_title.classList.remove("hide2")):(this.j_login_mobile.innerHTML=this.loginTitleText,this.j_login_title.classList.remove("hide2")),_isMiniSdk&&"false"===initData.baseV.isShowOtherLogin&&(this.j_tab_login_link.classList.add("hide"),this.j_login_title.classList.add("text-center"))},initBasicAppLink:function(){this.j_login_link.innerHTML="切换账号",this.j_tab_login_link.innerHTML="切换账号",this.j_tab_login_link.href="javascript: getJsBrigeSdkFunc('basicLoginCallBack','triggerByClick');",this.j_login_link.href="javascript:getJsBrigeSdkFunc('basicLoginCallBack','triggerByClick');",this.loginLink="javascript:getJsBrigeSdkFunc('basicLoginCallBack','triggerByClick');",this.j_login_link.setAttribute("onclick","_uxt.push(['_trackEvent', '"+_uxtsdkid+"+"+_uxt_version+"+免密登录页', '点击','基地切换账号'])"),this.j_tab_login_link.setAttribute("onclick","_uxt.push(['_trackEvent', '"+_uxtsdkid+"+"+_uxt_version+"+免密登录页', '点击','基地切换账号'])")},initLoginLink:function(){var _loginWay=initData.baseV.loginway?initData.baseV.loginway.split("|"):"1";_loginWay="1"!==_loginWay[0]&&"2"!==_loginWay[0]?["1"]:_loginWay,this.j_tab_login_link.innerHTML=this.loginLinkText[_loginWay[0]],this.j_login_link.innerHTML=this.loginLinkText[_loginWay[0]],this.j_tab_login_link.href=this.loginLinkUrl[_loginWay[0]],this.j_login_link.href=this.loginLinkUrl[_loginWay[0]],this.loginLink=this.loginLinkUrl[_loginWay[0]],this.j_login_link.setAttribute("onclick","_uxt.push(['_trackEvent', '"+_uxtsdkid+"+"+_uxt_version+"+免密登录页', '点击','"+this.j_tab_login_link.innerHTML+"'])"),this.j_tab_login_link.setAttribute("onclick","_uxt.push(['_trackEvent', '"+_uxtsdkid+"+"+_uxt_version+"+免密登录页', '点击','"+this.j_tab_login_link.innerHTML+"'])")},handelAccessCodeData:function(){for(var k in this.accessCodeData)this.accessCodeData[k]=void 0!==initData.baseV[k]?initData.baseV[k]:this.accessCodeData[k];return this.accessCodeData},handelLoginUnfreeze:function(){popup.showErrorPopup(this.errorMsg.freezeAccount,!1),popup.showErrorBtn("取消","解冻账号","https://e.189.cn/sdk/agreement/helpReply.do?returnUrl=auto_login.html&i=8&forSDK=true&forFreeze=true"),removeLoadingBtn(this.j_auto_login,"本机号码一键登录"),_uxt.push(["_trackEvent",_uxtsdkid+"+"+_uxt_version+"+"+_uxtsdkpage,"统计","登录失败"])},handelTokenTimeOut:function(isTokenAccount,onlinetype,islogin,mobile){"false"===isTokenAccount?this.handelLoginResultFail(onlinetype):this.handelLoginResultSuccess(islogin,mobile)},handelLoginResultFail:function(onlinetype){removeLoadingBtn(this.j_auto_login,"本机号码一键登录"),"true"===initData.baseV.basicapp?(getJsBrigeSdkFunc("basicLoginCallBack","triggerByAuto"),popup.closePopup()):window.location.href=this.loginLink+"?onlinetype="+onlinetype+"&unautologin=true&forTokenTimeout="+this.checkToken+"#unauto",_uxt.push(["_trackEvent",_uxtsdkid+"+"+_uxt_version+"+"+_uxtsdkpage,"统计","登录失败"])},handelLoginResultSuccess:function(islogin,mobile){"true"===islogin?(removeLoadingBtn(this.j_auto_login,"本机号码一键登录"),popup.showErrorPopup(this.errorMsg.isLoginText,!1),popup.showErrorBtn("确定","登录其他账号",this.loginLink)):(loadingBtn(this.j_auto_login,mobile+" 免密登录中"),setTimeout(function(){getJsBrigeSdkFunc("autoLoginSuccess")},2e3)),_uxt.push(["_trackEvent",_uxtsdkid+"+"+_uxt_version+"+"+_uxtsdkpage,"统计","登录成功"])},gatewayLoginCallBack:function(data){data=JSON.parse(data);if(checkAccessCode.delAccessCode(),data&&data.hasOwnProperty("result")){var result=parseInt(data.result),mobile=data.mobile?data.mobile:"",islogin=data.islogin||!1,onlinetype=data.onlinetype||"",status=data.status||"",isTokenAccount=data.isTokenAccount?data.isTokenAccount:"";if(0===result||"0"===result)switch(status){case 8:case"8":case 30:case"30":this.handelLoginResultFail(onlinetype);break;case 9:case"9":this.handelLoginUnfreeze();break;case 0:case"0":default:this.handelTokenTimeOut(isTokenAccount,onlinetype,islogin,mobile)}else this.handelLoginResultFail(onlinetype)}else popup.showErrorPopup(this.errorMsg.errorClientCallData,!0),removeLoadingBtn(this.j_auto_login,"本机号码一键登录"),_uxt.push(["_trackEvent",_uxtsdkid+"+"+_uxt_version+"+"+_uxtsdkpage,"统计","登录失败"])},handelGateWayLogin:function(networkAvailable){if("true"===networkAvailable){loadingBtn(this.j_auto_login,"免密登录中");preGetMobileUtil.preGetMobile()}else popup.showErrorPopup(this.errorMsg.errorunnet,!0),removeLoadingBtn(this.j_auto_login,"本机号码一键登录"),_uxt.push(["_trackEvent",_uxtsdkid+"+"+_uxt_version+"+"+_uxtsdkpage,"统计","取号失败+未知网络问题"])},eventListener:function(){var _this=this;_this.j_auto_login.addEventListener("click",function(e){if(checkAgreementBox(_this.j_agreement_checkbox,"确认登录",_this.j_auto_login,_this.j_agreement_link)){var networkAvailable=getJsBrigeSdkFunc("isNetworkAvailable","autoLogin.handelGateWayLogin");_this.handelGateWayLogin(networkAvailable),_uxt.push(["_trackEvent",_uxtsdkid+"+"+_uxt_version+"+"+_uxtsdkpage,"点击","确认登录"]),e.stopPropagation(),e.preventDefault()}}),_this.j_agreement_checkbox.addEventListener(START_EV,function(e){agreementBoxEvent(_this.j_agreement_checkbox)})}};